schema: '2.0'
stages:
  ingestion:
    cmd: python src/stages/data_ingestion.py
    deps:
    - path: Dataset/retail_store_inventory.csv
      hash: md5
      md5: 6a0fa7e36e816816814e984eb137f454
      size: 6191463
    - path: config/config.yaml
      hash: md5
      md5: e9cba5c7520dbbc3fa5e427e8d56d975
      size: 432
    - path: src/stages/data_ingestion.py
      hash: md5
      md5: 2ccd2d8f98a5cdcdada7399ccae5bd18
      size: 1079
    outs:
    - path: data/raw/raw.csv
      hash: md5
      md5: 6a0fa7e36e816816814e984eb137f454
      size: 6191463
  preprocessing:
    cmd: python src/stages/data_preprocessing.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: e9cba5c7520dbbc3fa5e427e8d56d975
      size: 432
    - path: data/raw/raw.csv
      hash: md5
      md5: 6a0fa7e36e816816814e984eb137f454
      size: 6191463
    - path: src/stages/data_preprocessing.py
      hash: md5
      md5: 11eb76bdf958fbd2204364f9eb9e1933
      size: 1769
    outs:
    - path: data/processed/processed.csv
      hash: md5
      md5: 400274b9a860d0245d79639b3fb6b7e2
      size: 22269028
    - path: models/scaler.joblib
      hash: md5
      md5: 10eae9947b836a85bdbeceeb2ea7d2d6
      size: 1367
  train:
    cmd: python src/stages/model_training.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: e9cba5c7520dbbc3fa5e427e8d56d975
      size: 432
    - path: data/processed/processed.csv
      hash: md5
      md5: 400274b9a860d0245d79639b3fb6b7e2
      size: 22269028
    - path: src/stages/model_training.py
      hash: md5
      md5: 59d031f4fbf31585ee4f8ab89bd22d91
      size: 3995
    outs:
    - path: metrics.json
      hash: md5
      md5: 401881c3a45962130b6225f0d94ab655
      size: 351
    - path: models/lightgbm_model.joblib
      hash: md5
      md5: fa2ed18d5106bb21015c2321f588e379
      size: 311349
    - path: models/xgboost_model.joblib
      hash: md5
      md5: 20286d5f03c3c65718c0856726ffd390
      size: 479870
  tuning:
    cmd: python src/stages/hyperparameter_tuning.py
    deps:
    - path: config/config.yaml
      hash: md5
      md5: 0eefab6461dbc2e20d3be08f9569140f
      size: 417
    - path: data/processed/processed.csv
      hash: md5
      md5: e84c90b843c2cdfb335083cc1b3450bc
      size: 25798985
    - path: src/stages/hyperparameter_tuning.py
      hash: md5
      md5: 279e004a08560bc31daca2fac9611f59
      size: 3273
  register:
    cmd: python src/stages/model_register.py && echo registration_complete > 
      models/register.done
    deps:
    - path: metrics.json
      hash: md5
      md5: 401881c3a45962130b6225f0d94ab655
      size: 351
    - path: src/stages/model_register.py
      hash: md5
      md5: 05c9e83e3a9b37e4f7e79120849d1ebd
      size: 4020
    outs:
    - path: models/register.done
      hash: md5
      md5: 6c59ff51058fb926ec6d11a2bc77cd77
      size: 24
  promotion:
    cmd: python src/stages/model_promotion.py && echo promotion_complete > 
      models/promotion.done
    deps:
    - path: data/processed/processed.csv
      hash: md5
      md5: 400274b9a860d0245d79639b3fb6b7e2
      size: 22269028
    - path: models/register.done
      hash: md5
      md5: 6c59ff51058fb926ec6d11a2bc77cd77
      size: 24
    - path: src/stages/model_promotion.py
      hash: md5
      md5: 0649261fd08aa7fa5f1b5c24470288e7
      size: 4308
    outs:
    - path: models/promotion.done
      hash: md5
      md5: 9ce1ccc28eeee7ffdf6a72ff56126ff9
      size: 21
  batch_prediction:
    cmd: python src/stages/batch_inference.py
    deps:
    - path: data/processed/processed.csv
      hash: md5
      md5: 400274b9a860d0245d79639b3fb6b7e2
      size: 22269028
    - path: models/promotion.done
      hash: md5
      md5: 9ce1ccc28eeee7ffdf6a72ff56126ff9
      size: 21
    - path: src/models/forecaster.py
      hash: md5
      md5: 7fc9cb3df1499f52d87a3190eef25975
      size: 3051
    - path: src/stages/batch_inference.py
      hash: md5
      md5: 108e521c1c2a1110330ba0092a8c411e
      size: 2472
    outs:
    - path: data/forecasts/batch_results.json
      hash: md5
      md5: 60be9cf8ada9ad2bea4d078a9783d6d5
      size: 1670
